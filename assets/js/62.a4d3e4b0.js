(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{344:function(t,v,_){"use strict";_.r(v);var s=_(14),a=Object(s.a)({},(function(){var t=this,v=t._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"https"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#https"}},[t._v("#")]),t._v(" https")]),t._v(" "),v("h2",{attrs:{id:"https的工作模式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#https的工作模式"}},[t._v("#")]),t._v(" https的工作模式")]),t._v(" "),v("ol",{attrs:{start:"0"}},[v("li",[t._v("尽量tcp的三次握手")]),t._v(" "),v("li",[t._v("客户端会发送一个消息到服务端，已明文传输TLS版本信息，加密套件、压缩算法候选列表等信息，以及一个随机数"),v("code",[t._v("random1")])]),t._v(" "),v("li",[t._v("服务端收到之后，告诉客户端服务器选择使用的协议版本、加密套件、压缩算法等，还有一个随机数"),v("code",[t._v("random2")]),t._v("，用于后面协商密钥，还有一个证书")]),t._v(" "),v("li",[t._v("客户端收到证书，验证证书的有效性，得到证书的信息以及服务器的公钥，(这里很关键的一点，密钥不明文传输的了，通过证书获得)")]),t._v(" "),v("li",[t._v("用"),v("code",[t._v("random1")]),t._v("和"),v("code",[t._v("random2")]),t._v("生成"),v("code",[t._v("pre-master")]),t._v("通过服务器公钥加密传输到服务器")]),t._v(" "),v("li",[t._v("双发用"),v("code",[t._v("random1")]),t._v("+"),v("code",[t._v("random2")]),t._v("+随机数"),v("code",[t._v("pre-master")]),t._v("一起根据约定的加密算法算出对称密钥，然后双发用原来商量过的参数进行加密传输校验")]),t._v(" "),v("li",[t._v("双方握手结束之后，就可以通过对称密钥进行加密传输了")])]),t._v(" "),v("h2",{attrs:{id:"关于如何生成和校验数字证书"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#关于如何生成和校验数字证书"}},[t._v("#")]),t._v(" 关于如何生成和校验数字证书")]),t._v(" "),v("ol",[v("li",[t._v("服务器提交自己的公钥和站点资料提交给CA，CA审核真实性之后，用hash算法对明文资料加密得出信息摘要，CA用自己的私钥对用到的"),v("code",[t._v("HASH")]),t._v("算法等信息加密进行加密得出数字签名。")]),t._v(" "),v("li",[t._v("最后服务器得到的CA前面的数字证书是包含公钥，基础信息，以及数字签名")]),t._v(" "),v("li",[t._v("服务器得到数字证书后，会先验证证书的有效期，是否被CA吊销，以及CA是否是合法的。（会有数字证书链）")]),t._v(" "),v("li",[t._v("验证通过后通过CA的公钥对数字前面进行解密得到信息摘要，在用解密得到的hash算法对公钥、证书信息进行hash散列算法得到信息摘要，判断是否相等。")])]),t._v(" "),v("h2",{attrs:{id:"https加密了为什么抓包还是明文"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#https加密了为什么抓包还是明文"}},[t._v("#")]),t._v(" https加密了为什么抓包还是明文")]),t._v(" "),v("p",[t._v("https抓包的原理其实是抓包程序将服务器的证书截获的，先在本地安装自己的证书，然后把自己的证书发送给客户端，客户端发送数据之后，在用自己的证书将客户端发送的数据进行解密，将服务器的证书对其进行加密，再发送给服务器，使用能看到明文。")])])}),[],!1,null,null,null);v.default=a.exports}}]);