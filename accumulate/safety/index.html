<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>安全 | 个人主页</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/images/photo.jpg">
    <link rel="manifest" href="/images/photo.jpg">
    <link rel="apple-touch-icon" href="/images/photo.jpg">
    <meta name="description" content="我的个人网站">
    <meta http-quiv="pragma" cotent="no-cache">
    <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
    <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/assets/css/0.styles.8f3dca9f.css" as="style"><link rel="preload" href="/assets/js/app.e6d790d2.js" as="script"><link rel="preload" href="/assets/js/2.670a8c78.js" as="script"><link rel="preload" href="/assets/js/1.71926bfe.js" as="script"><link rel="preload" href="/assets/js/37.e2f9bc23.js" as="script"><link rel="prefetch" href="/assets/js/10.66b9053d.js"><link rel="prefetch" href="/assets/js/11.04545941.js"><link rel="prefetch" href="/assets/js/12.1bdea263.js"><link rel="prefetch" href="/assets/js/13.9426da25.js"><link rel="prefetch" href="/assets/js/14.856c1518.js"><link rel="prefetch" href="/assets/js/15.b360c35b.js"><link rel="prefetch" href="/assets/js/16.e925b239.js"><link rel="prefetch" href="/assets/js/17.5b873df7.js"><link rel="prefetch" href="/assets/js/18.4c170722.js"><link rel="prefetch" href="/assets/js/19.a45744ea.js"><link rel="prefetch" href="/assets/js/20.e4646aa0.js"><link rel="prefetch" href="/assets/js/21.a45f0526.js"><link rel="prefetch" href="/assets/js/22.49faaeca.js"><link rel="prefetch" href="/assets/js/23.c2b62dee.js"><link rel="prefetch" href="/assets/js/24.637d604b.js"><link rel="prefetch" href="/assets/js/25.1370aa75.js"><link rel="prefetch" href="/assets/js/26.254ee0fc.js"><link rel="prefetch" href="/assets/js/27.09790146.js"><link rel="prefetch" href="/assets/js/28.7e5b1948.js"><link rel="prefetch" href="/assets/js/29.fce874c1.js"><link rel="prefetch" href="/assets/js/3.4db2e19a.js"><link rel="prefetch" href="/assets/js/30.a2fe8eb2.js"><link rel="prefetch" href="/assets/js/31.162506d4.js"><link rel="prefetch" href="/assets/js/32.3cde0674.js"><link rel="prefetch" href="/assets/js/33.d7d3d255.js"><link rel="prefetch" href="/assets/js/34.70bab86a.js"><link rel="prefetch" href="/assets/js/35.e25e2604.js"><link rel="prefetch" href="/assets/js/36.b5fada05.js"><link rel="prefetch" href="/assets/js/38.24d3a67d.js"><link rel="prefetch" href="/assets/js/39.2b6a21e0.js"><link rel="prefetch" href="/assets/js/4.45665f8a.js"><link rel="prefetch" href="/assets/js/40.d406595a.js"><link rel="prefetch" href="/assets/js/41.917cf6ec.js"><link rel="prefetch" href="/assets/js/42.2a915dbf.js"><link rel="prefetch" href="/assets/js/43.06d233c4.js"><link rel="prefetch" href="/assets/js/44.f41cf9e5.js"><link rel="prefetch" href="/assets/js/45.2f577289.js"><link rel="prefetch" href="/assets/js/46.69e142ff.js"><link rel="prefetch" href="/assets/js/47.6967f1f2.js"><link rel="prefetch" href="/assets/js/48.c42a0925.js"><link rel="prefetch" href="/assets/js/49.396ed3db.js"><link rel="prefetch" href="/assets/js/5.b31b942f.js"><link rel="prefetch" href="/assets/js/50.f9fa87b4.js"><link rel="prefetch" href="/assets/js/51.f5150e72.js"><link rel="prefetch" href="/assets/js/52.5b2e9eb6.js"><link rel="prefetch" href="/assets/js/53.775f3eb1.js"><link rel="prefetch" href="/assets/js/54.af0c3dd1.js"><link rel="prefetch" href="/assets/js/55.062c9831.js"><link rel="prefetch" href="/assets/js/56.3228b669.js"><link rel="prefetch" href="/assets/js/57.3e194052.js"><link rel="prefetch" href="/assets/js/58.0fac8851.js"><link rel="prefetch" href="/assets/js/59.4a2921bc.js"><link rel="prefetch" href="/assets/js/6.4910e764.js"><link rel="prefetch" href="/assets/js/60.aaff0e8d.js"><link rel="prefetch" href="/assets/js/61.4094ca3e.js"><link rel="prefetch" href="/assets/js/62.a4d3e4b0.js"><link rel="prefetch" href="/assets/js/63.90c7781d.js"><link rel="prefetch" href="/assets/js/64.9f28672a.js"><link rel="prefetch" href="/assets/js/65.82d99a34.js"><link rel="prefetch" href="/assets/js/66.4b1a7c79.js"><link rel="prefetch" href="/assets/js/67.cde2a4b8.js"><link rel="prefetch" href="/assets/js/68.7b2ca4b4.js"><link rel="prefetch" href="/assets/js/69.3f6a7106.js"><link rel="prefetch" href="/assets/js/7.c5640ac7.js"><link rel="prefetch" href="/assets/js/70.97a2a772.js"><link rel="prefetch" href="/assets/js/71.35881c3b.js"><link rel="prefetch" href="/assets/js/72.25b350dc.js"><link rel="prefetch" href="/assets/js/73.11c7d3f8.js"><link rel="prefetch" href="/assets/js/74.920a6416.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8f3dca9f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">个人主页</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/accumulate/prepare/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div><div class="nav-item"><a href="/network/guide/" class="nav-link">
  网络
</a></div><div class="nav-item"><a href="/miniprogram/" class="nav-link">
  小程序
</a></div><div class="nav-item"><a href="/typescript/" class="nav-link">
  typescript
</a></div><div class="nav-item"><a href="/front-end-playground/" class="nav-link">
  前端的进击
</a></div><div class="nav-item"><a href="/others/" class="nav-link">
  其他
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/accumulate/prepare/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div><div class="nav-item"><a href="/network/guide/" class="nav-link">
  网络
</a></div><div class="nav-item"><a href="/miniprogram/" class="nav-link">
  小程序
</a></div><div class="nav-item"><a href="/typescript/" class="nav-link">
  typescript
</a></div><div class="nav-item"><a href="/front-end-playground/" class="nav-link">
  前端的进击
</a></div><div class="nav-item"><a href="/others/" class="nav-link">
  其他
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>准备工作</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/accumulate/prepare/" class="sidebar-link">Introduction</a></li><li><a href="/accumulate/prepare/jsbase.html" class="sidebar-link">js基础</a></li><li><a href="/accumulate/prepare/summary.html" class="sidebar-link">写给自己看的js基础灵魂拷问</a></li><li><a href="/accumulate/prepare/init.html" class="sidebar-link">Vue 原理解析</a></li><li><a href="/accumulate/prepare/jsleetcode.html" class="sidebar-link">学习js数据结构与算法 &amp; 算法图解</a></li><li><a href="/accumulate/prepare/vue3.html" class="sidebar-link">vue3的一些改变</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>安全</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/accumulate/safety/" aria-current="page" class="active sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/accumulate/safety/#内容安全策略-csp" class="sidebar-link">内容安全策略(csp)</a></li><li class="sidebar-sub-header"><a href="/accumulate/safety/#浏览器同源策略" class="sidebar-link">浏览器同源策略</a></li><li class="sidebar-sub-header"><a href="/accumulate/safety/#xss攻击-跨站脚本攻击" class="sidebar-link">XSS攻击（跨站脚本攻击）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/accumulate/safety/#存储型xss" class="sidebar-link">存储型xss</a></li><li class="sidebar-sub-header"><a href="/accumulate/safety/#反射型xss" class="sidebar-link">反射型xss</a></li><li class="sidebar-sub-header"><a href="/accumulate/safety/#dom型xss" class="sidebar-link">dom型xss</a></li><li class="sidebar-sub-header"><a href="/accumulate/safety/#如何阻止" class="sidebar-link">如何阻止</a></li></ul></li><li class="sidebar-sub-header"><a href="/accumulate/safety/#csrf-跨站请求伪造" class="sidebar-link">csrf（跨站请求伪造）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/accumulate/safety/#常见攻击流程" class="sidebar-link">常见攻击流程</a></li><li class="sidebar-sub-header"><a href="/accumulate/safety/#防御csrf攻击" class="sidebar-link">防御csrf攻击</a></li></ul></li></ul></li><li><a href="/accumulate/safety/xsscsrf.html" class="sidebar-link">谈谈XSS与CSRF</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>编译</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/accumulate/compile/" class="sidebar-link">vue2源码</a></li><li><a href="/accumulate/compile/vdom.html" class="sidebar-link">虚拟dom</a></li><li><a href="/accumulate/compile/parse.html" class="sidebar-link">parse</a></li><li><a href="/accumulate/compile/entrance.html" class="sidebar-link">编译入口</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="安全"><a href="#安全" class="header-anchor">#</a> 安全</h1> <h2 id="内容安全策略-csp"><a href="#内容安全策略-csp" class="header-anchor">#</a> 内容安全策略(csp)</h2> <ul><li>csp的主要目的是减少xss攻击，xss攻击利用浏览器对服务器获取内容的信任，恶意脚本得以在浏览器中运行，由于浏览器信任其内容来源，即使有的时候这些并非来自它该来的地方。</li> <li>比如禁止不安全的内联动态执行,和只能通过https加载这些资源 (images, fonts, scripts, etc.)
<meta http-equiv="Content-Security-Policy" content="default-src https:"></li></ul> <h2 id="浏览器同源策略"><a href="#浏览器同源策略" class="header-anchor">#</a> 浏览器同源策略</h2> <blockquote><p><code>如果两个url的协议端口和域名都相同，就称这个两个url同源</code></p></blockquote> <ul><li>dom层面，限制来自不同源的js脚本对当前dom对象的读写操作</li> <li>数据层面， 限制不同源站点读取当前的cookie、indexdb、localstorage</li> <li>网络层面，通过XMLHttpRequest会跨域
但是可以内联指向js，以及请求js资源图片不会跨域，这就出现了csp，可以让服务器决定浏览器可以加载哪些资源，以及是否能执行内联的js代码。</li></ul> <h2 id="xss攻击-跨站脚本攻击"><a href="#xss攻击-跨站脚本攻击" class="header-anchor">#</a> XSS攻击（跨站脚本攻击）</h2> <ul><li>带来的危害： 获取cookie信息，操作修改dom，发送恶意请求，在页面生成弹窗广告</li></ul> <h3 id="存储型xss"><a href="#存储型xss" class="header-anchor">#</a> 存储型xss</h3> <p>利用站点漏洞将一段恶意的js代码提交到网站的数据库中，然后用户想网站请求时，包含的这段恶意js代码，用户浏览页面时，恶意脚本就会将用户cookie等数据上传到服务器。</p> <h3 id="反射型xss"><a href="#反射型xss" class="header-anchor">#</a> 反射型xss</h3> <ul><li>恶意js脚本属于用户发送给网站请求的一部分，然后网站又把恶意的js脚本返回给了用户，然后这段js脚本在用户页面中执行</li> <li>很常见的时候我们在搜索的时候，搜索的内容通过key-value的方式发送给服务器，服务器读取到key值，直接把value值返回过来，里面就包含了恶意代码</li> <li>在现实生活当中，黑客经常会通过qq群或邮件等渠道去诱导用户去点击恶意链接</li> <li>web服务器不会存储反射型xss的恶意脚本</li></ul> <h3 id="dom型xss"><a href="#dom型xss" class="header-anchor">#</a> dom型xss</h3> <ul><li>这个不牵扯到web服务器，常见就是黑客通过各种手段将恶意脚本注入到用户的页面中，比如通过网络劫持在传输过程总修改html页面的内容，比如wifi路由器，本地恶意软件。</li></ul> <h3 id="如何阻止"><a href="#如何阻止" class="header-anchor">#</a> 如何阻止</h3> <ul><li>服务器对输入脚本进行过滤，比如将关键字转码 <code>&lt;=&amp;lt; &gt;=&amp;gt</code></li> <li>充分利用csp，可以禁止内联js代码执行，以及外域的资源文件，禁止向第三方域提交哦数据</li> <li>使用httponly属性，防止cookie读写</li> <li>在开发中尽量少使用innerhtml或vue中v-html</li></ul> <h2 id="csrf-跨站请求伪造"><a href="#csrf-跨站请求伪造" class="header-anchor">#</a> csrf（跨站请求伪造）</h2> <ul><li>csrf攻击是黑客利用了用户的登录状态，并通过第三方站点来做一些坏事</li></ul> <h3 id="常见攻击流程"><a href="#常见攻击流程" class="header-anchor">#</a> 常见攻击流程</h3> <p>我们在登录A站点之后，以及保留了登录状态，攻击者引诱用户打开b网站，然后悄悄的在b网站向a网站发送网络请求，由于a网站有登录状态，此时发送到b站点是以受害者的身份，然后进行了一些操作。</p> <ul><li>自动发起get请求，在页面的img标签的src中嵌入链接</li> <li>自动发起post请求，构造伪造表单</li> <li>引诱用户点击链接，常见在论坛和恶意邮件</li> <li>和xss不同的是，csrf攻击不需要将恶意代码注入用户页面，仅仅是利用服务器漏洞和用户登录状态来实施攻击，利用用户对浏览器的信任</li></ul> <h3 id="防御csrf攻击"><a href="#防御csrf攻击" class="header-anchor">#</a> 防御csrf攻击</h3> <ul><li>充分利用好cookie的samesie属性，strict禁止所有第三方，lax可以试get的提交=表单，none是没有；
<ul><li>设置了strict，比如在a网站通过<code>&lt;a href=&quot;https://www.infoq.cn/sendcoin?user=hacker&amp;number=100&quot;&gt;</code>是不会带上infoq的cookie，img图片请求只会带上none属性的信息</li></ul></li> <li>验证请求来源站点 Rerefer以及origin这个是可以被修改</li> <li>csrf token 在浏览器向服务器发起请求时，服务器生成一个csrftoken，然后将该字符串植入到返回的页面中</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/19/2021, 5:03:22 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/accumulate/prepare/vue3.html" class="prev">
        vue3的一些改变
      </a></span> <span class="next"><a href="/accumulate/safety/xsscsrf.html">
        谈谈XSS与CSRF
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e6d790d2.js" defer></script><script src="/assets/js/2.670a8c78.js" defer></script><script src="/assets/js/1.71926bfe.js" defer></script><script src="/assets/js/37.e2f9bc23.js" defer></script>
  </body>
</html>
